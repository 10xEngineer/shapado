
-solution = solution || false

.answer{:class => solution ? "solution" : ""}
  .answer_title
    .gravatar.left{:style => "padding: 2px"}
      = gravatar(answer.user.email.to_s, :size => 14)
    = link_to h(answer.user.login), user_path(answer.user)
    = time_ago_in_words(answer.created_at)
    .clear
  .answer_body
    = vote_box(answer, question_path(question))
    %span.markdown
      = markdown(answer.body)
    .clear
    -if answer.flags_count > 0
      %h3= t("views.questions.show.flags")
      = render :partial => "flags/list", :locals => {:flaggeable => answer}
    %br
    %hr
    / Nested Answers
    .children
      -answer.children.each do |child|
        .child{:style => "padding-top: 10px"}
          =link_to child.user.login, user_path(child.user)
          =time_ago_in_words(child.created_at)
          %br

          = h(child.body)
          %hr
      %span.actions
        = link_to t("views.questions.show.flag"), flag_answer_path(answer), :class => "flag-link"
      .right
        = link_to "Add Comment...", "#", :class => "addNestedAnswer"
      .clear
      -form_for @answer, :html => {:class => "form nestedAnswerForm"} do |f|
        = render :partial => "answers/form", :locals => {:f => f, :parent => answer}
        = submit_tag I18n.t('views.answers.form.submit')
      .flag_form.hidden
        -flag = Flag.new
        -flag.flaggeable = answer
        = render :partial => "flags/form", :locals => {:flag => flag, :source => question_path(@question) }
    / Buttons
    -if logged_in?
      .buttons
        -if current_user.can_modify?(answer)
          = link_to I18n.t("scaffold.edit"), edit_answer_path(answer), :class =>"button"
          = link_to I18n.t("scaffold.destroy"), answer, :confirm => I18n.t("scaffold.sure", :model => "answer"), :method => :delete, :class =>"button cancel"
        -if current_user.can_modify?(@question)
          -unless @question.answered
            = link_to t("pick_answer", :scope => "views.questions.show"), solve_question_path(@question, :answer_id => answer), :class =>"button"
          -if solution
            = link_to t("unset_answer", :scope => "views.questions.show"),  unsolve_question_path(@question), :class =>"button"
  .clear
